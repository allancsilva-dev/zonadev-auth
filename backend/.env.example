# ─── Banco de Dados ────────────────────────────────────────────────────────────
DATABASE_URL=postgresql://user:password@host:5432/zonadev_db

# ─── JWT ───────────────────────────────────────────────────────────────────────
JWT_PRIVATE_KEY_PATH=./keys/private.pem
JWT_PUBLIC_KEY_PATH=./keys/public.pem

# Expiração em segundos
JWT_ACCESS_EXPIRES=900       # 15 minutos
JWT_REFRESH_EXPIRES=604800   # 7 dias

# Identificação da chave RSA no JWKS — atualizar ao rotacionar chaves
JWT_KID=zonadev-2026-01

# Emissor do JWT (iss claim)
JWT_ISSUER=auth.zonadev.tech

# ─── Aplicação ─────────────────────────────────────────────────────────────────
PORT=3000
NODE_ENV=development   # development | production

# Domínio base — usado por isSafeRedirect() e URLs de e-mail
DOMAIN=zonadev.tech

# ─── Segurança ─────────────────────────────────────────────────────────────────
# Sistemas clientes autorizados a receber tokens JWT (campo aud)
# Separados por vírgula — sem espaços
# TODO v2.0: migrar para tabela applications no banco de dados
ALLOWED_AUDIENCES=renowa.zonadev.tech

# Origens permitidas no CORS (Access-Control-Allow-Origin)
# NUNCA usar * com credentials — browser rejeita
ALLOWED_ORIGINS=https://renowa.zonadev.tech

# ─── E-mail (SMTP) ──────────────────────────────────────────────────────────────
MAIL_HOST=smtp.example.com
MAIL_PORT=587
MAIL_USER=noreply@zonadev.tech
MAIL_PASS=change_me_in_production
MAIL_FROM=ZonaDev Auth <noreply@zonadev.tech>

# ─── Seed ──────────────────────────────────────────────────────────────────────
# Senha do SUPERADMIN criado pelo seed
SEED_ADMIN_PASSWORD=change_me_in_production

# ─── Notas de Produção ─────────────────────────────────────────────────────────
# - Servidor DEVE estar sincronizado via NTP (JWT depende de tempo preciso)
# - Rate limiting usa memória local por instância
#   Em multi-instância (K8s, Swarm): migrar para Redis throttler
# - Cookie domain=.zonadev.tech (com ponto) cobre todos os subdomínios
#   Em desenvolvimento: cookie domain é undefined (browser assume localhost)
# - Chaves RSA em ./keys/ — NUNCA commitar para o repositório
#   Carregar via variável de ambiente em produção (secrets manager)
